---
ID: "1d012672-f5a1-4920-8b32-f589e79c5c61"
Parent: "d800c068-9717-49a0-961e-f913d7c0053c"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/OneWeb/OneWeb/OneWeb/OneWeb/Scripts/4-ekko-lightbox"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/1D012672F5A149208B32F589E79C5C61.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "3c5c477e-6ead-4509-b2e6-5e75f4ac2c2c"
  Value: LyohDQogKiBMaWdodGJveCBmb3IgQm9vdHN0cmFwIGJ5IEBhc2hsZXlkdw0KICogaHR0cHM6Ly9naXRodWIuY29tL2FzaGxleWR3L2xpZ2h0Ym94DQogKg0KICogTGljZW5zZTogaHR0cHM6Ly9naXRodWIuY29tL2FzaGxleWR3L2xpZ2h0Ym94L2Jsb2IvbWFzdGVyL0xJQ0VOU0UNCiAqLw0KK2Z1bmN0aW9uICgkKSB7DQoNCid1c2Ugc3RyaWN0JzsNCg0KdmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTsNCg0KZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9DQoNCnZhciBMaWdodGJveCA9IChmdW5jdGlvbiAoJCkgew0KDQoJdmFyIE5BTUUgPSAnZWtrb0xpZ2h0Ym94JzsNCgl2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTsNCg0KCXZhciBEZWZhdWx0ID0gew0KCQl0aXRsZTogJycsDQoJCWZvb3RlcjogJycsDQoJCW1heFdpZHRoOiA5OTk5LA0KCQltYXhIZWlnaHQ6IDk5OTksDQoJCXNob3dBcnJvd3M6IHRydWUsIC8vZGlzcGxheSB0aGUgbGVmdCAvIHJpZ2h0IGFycm93cyBvciBub3QNCgkJd3JhcHBpbmc6IHRydWUsIC8vaWYgdHJ1ZSwgZ2FsbGVyeSBsb29wcyBpbmZpbml0ZWx5DQoJCXR5cGU6IG51bGwsIC8vZm9yY2UgdGhlIGxpZ2h0Ym94IGludG8gaW1hZ2UgLyB5b3V0dWJlIG1vZGUuIGlmIG51bGwsIG9yIG5vdCBpbWFnZXx5b3V0dWJlfHZpbWVvOyBkZXRlY3QgaXQNCgkJYWx3YXlzU2hvd0Nsb3NlOiBmYWxzZSwgLy9hbHdheXMgc2hvdyB0aGUgY2xvc2UgYnV0dG9uLCBldmVuIGlmIHRoZXJlIGlzIG5vIHRpdGxlDQoJCWxvYWRpbmdNZXNzYWdlOiAnPGRpdiBjbGFzcz0iZWtrby1saWdodGJveC1sb2FkZXIiPjxkaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicsIC8vIGh0dHA6Ly90b2JpYXNhaGxpbi5jb20vc3BpbmtpdC8NCgkJbGVmdEFycm93OiAnPHNwYW4+JiMxMDA5NDs8L3NwYW4+JywNCgkJcmlnaHRBcnJvdzogJzxzcGFuPiYjMTAwOTU7PC9zcGFuPicsDQoJCXN0cmluZ3M6IHsNCgkJCWNsb3NlOiAnQ2xvc2UnLA0KCQkJZmFpbDogJ0ZhaWxlZCB0byBsb2FkIGltYWdlOicsDQoJCQl0eXBlOiAnQ291bGQgbm90IGRldGVjdCByZW1vdGUgdGFyZ2V0IHR5cGUuIEZvcmNlIHRoZSB0eXBlIHVzaW5nIGRhdGEtdHlwZScNCgkJfSwNCgkJZG9jOiBkb2N1bWVudCwgLy8gaWYgaW4gYW4gaWZyYW1lIGNhbiBzcGVjaWZ5IHRvcC5kb2N1bWVudA0KCQlvblNob3c6IGZ1bmN0aW9uIG9uU2hvdygpIHt9LA0KCQlvblNob3duOiBmdW5jdGlvbiBvblNob3duKCkge30sDQoJCW9uSGlkZTogZnVuY3Rpb24gb25IaWRlKCkge30sDQoJCW9uSGlkZGVuOiBmdW5jdGlvbiBvbkhpZGRlbigpIHt9LA0KCQlvbk5hdmlnYXRlOiBmdW5jdGlvbiBvbk5hdmlnYXRlKCkge30sDQoJCW9uQ29udGVudExvYWRlZDogZnVuY3Rpb24gb25Db250ZW50TG9hZGVkKCkge30NCgl9Ow0KDQoJdmFyIExpZ2h0Ym94ID0gKGZ1bmN0aW9uICgpIHsNCgkJX2NyZWF0ZUNsYXNzKExpZ2h0Ym94LCBudWxsLCBbew0KCQkJa2V5OiAnRGVmYXVsdCcsDQoNCgkJCS8qKg0KICAgICAgIENsYXNzIHByb3BlcnRpZXM6DQogICAJIF8kZWxlbWVudDogbnVsbCAtPiB0aGUgPGE+IGVsZW1lbnQgY3VycmVudGx5IGJlaW5nIGRpc3BsYXllZA0KICAgIF8kbW9kYWw6IFRoZSBib290c3RyYXAgbW9kYWwgZ2VuZXJhdGVkDQogICAgICAgXyRtb2RhbERpYWxvZzogVGhlIC5tb2RhbC1kaWFsb2cNCiAgICAgICBfJG1vZGFsQ29udGVudDogVGhlIC5tb2RhbC1jb250ZW50DQogICAgICAgXyRtb2RhbEJvZHk6IFRoZSAubW9kYWwtYm9keQ0KICAgICAgIF8kbW9kYWxIZWFkZXI6IFRoZSAubW9kYWwtaGVhZGVyDQogICAgICAgXyRtb2RhbEZvb3RlcjogVGhlIC5tb2RhbC1mb290ZXINCiAgICBfJGxpZ2h0Ym94Q29udGFpbmVyT25lOiBDb250YWluZXIgb2YgdGhlIGZpcnN0IGxpZ2h0Ym94IGVsZW1lbnQNCiAgICBfJGxpZ2h0Ym94Q29udGFpbmVyVHdvOiBDb250YWluZXIgb2YgdGhlIHNlY29uZCBsaWdodGJveCBlbGVtZW50DQogICAgXyRsaWdodGJveEJvZHk6IEZpcnN0IGVsZW1lbnQgaW4gdGhlIGNvbnRhaW5lcg0KICAgIF8kbW9kYWxBcnJvd3M6IFRoZSBvdmVybGF5ZWQgYXJyb3dzIGNvbnRhaW5lcg0KICAgCSBfJGdhbGxlcnlJdGVtczogT3RoZXIgPGE+J3MgYXZhaWxhYmxlIGZvciB0aGlzIGdhbGxlcnkNCiAgICBfZ2FsbGVyeU5hbWU6IE5hbWUgb2YgdGhlIGN1cnJlbnQgZGF0YSgnZ2FsbGVyeScpIHNob3dpbmcNCiAgICBfZ2FsbGVyeUluZGV4OiBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgXyRnYWxsZXJ5SXRlbXMgYmVpbmcgc2hvd24NCiAgIAkgX2NvbmZpZzoge30gdGhlIG9wdGlvbnMgZm9yIHRoZSBtb2RhbA0KICAgIF9tb2RhbElkOiB1bmlxdWUgaWQgZm9yIHRoZSBjdXJyZW50IGxpZ2h0Ym94DQogICAgX3BhZGRpbmcgLyBfYm9yZGVyOiBDU1MgcHJvcGVydGllcyBmb3IgdGhlIG1vZGFsIGNvbnRhaW5lcjsgdGhlc2UgYXJlIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBhdmFpbGFibGUgc3BhY2UgZm9yIHRoZSBjb250ZW50DQogICAJICovDQoNCgkJCWdldDogZnVuY3Rpb24gZ2V0KCkgew0KCQkJCXJldHVybiBEZWZhdWx0Ow0KCQkJfQ0KCQl9XSk7DQoNCgkJZnVuY3Rpb24gTGlnaHRib3goJGVsZW1lbnQsIGNvbmZpZykgew0KCQkJdmFyIF90aGlzID0gdGhpczsNCg0KCQkJX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpZ2h0Ym94KTsNCg0KCQkJdGhpcy5fY29uZmlnID0gJC5leHRlbmQoe30sIERlZmF1bHQsIGNvbmZpZyk7DQoJCQl0aGlzLl8kbW9kYWxBcnJvd3MgPSBudWxsOw0KCQkJdGhpcy5fZ2FsbGVyeUluZGV4ID0gMDsNCgkJCXRoaXMuX2dhbGxlcnlOYW1lID0gbnVsbDsNCgkJCXRoaXMuX3BhZGRpbmcgPSBudWxsOw0KCQkJdGhpcy5fYm9yZGVyID0gbnVsbDsNCgkJCXRoaXMuX3RpdGxlSXNTaG93biA9IGZhbHNlOw0KCQkJdGhpcy5fZm9vdGVySXNTaG93biA9IGZhbHNlOw0KCQkJdGhpcy5fd2FudGVkV2lkdGggPSAwOw0KCQkJdGhpcy5fd2FudGVkSGVpZ2h0ID0gMDsNCgkJCXRoaXMuX3RvdWNoc3RhcnRYID0gMDsNCgkJCXRoaXMuX3RvdWNoZW5kWCA9IDA7DQoNCgkJCXRoaXMuX21vZGFsSWQgPSAnZWtrb0xpZ2h0Ym94LScgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwICsgMSk7DQoJCQl0aGlzLl8kZWxlbWVudCA9ICRlbGVtZW50IGluc3RhbmNlb2YgalF1ZXJ5ID8gJGVsZW1lbnQgOiAkKCRlbGVtZW50KTsNCg0KCQkJdGhpcy5faXNCb290c3RyYXAzID0gJC5mbi5tb2RhbC5Db25zdHJ1Y3Rvci5WRVJTSU9OWzBdID09IDM7DQoNCgkJCXZhciBoNCA9ICc8aDQgY2xhc3M9Im1vZGFsLXRpdGxlIj4nICsgKHRoaXMuX2NvbmZpZy50aXRsZSB8fCAiJm5ic3A7IikgKyAnPC9oND4nOw0KCQkJdmFyIGJ0biA9ICc8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImNsb3NlIiBkYXRhLWRpc21pc3M9Im1vZGFsIiBhcmlhLWxhYmVsPSInICsgdGhpcy5fY29uZmlnLnN0cmluZ3MuY2xvc2UgKyAnIj48c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSI+JnRpbWVzOzwvc3Bhbj48L2J1dHRvbj4nOw0KDQoJCQl2YXIgaGVhZGVyID0gJzxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlcicgKyAodGhpcy5fY29uZmlnLnRpdGxlIHx8IHRoaXMuX2NvbmZpZy5hbHdheXNTaG93Q2xvc2UgPyAnJyA6ICcgaGlkZScpICsgJyI+JyArICh0aGlzLl9pc0Jvb3RzdHJhcDMgPyBidG4gKyBoNCA6IGg0ICsgYnRuKSArICc8L2Rpdj4nOw0KCQkJdmFyIGZvb3RlciA9ICc8ZGl2IGNsYXNzPSJtb2RhbC1mb290ZXInICsgKHRoaXMuX2NvbmZpZy5mb290ZXIgPyAnJyA6ICcgaGlkZScpICsgJyI+JyArICh0aGlzLl9jb25maWcuZm9vdGVyIHx8ICImbmJzcDsiKSArICc8L2Rpdj4nOw0KCQkJdmFyIGJvZHkgPSAnPGRpdiBjbGFzcz0ibW9kYWwtYm9keSI+PGRpdiBjbGFzcz0iZWtrby1saWdodGJveC1jb250YWluZXIiPjxkaXYgY2xhc3M9ImVra28tbGlnaHRib3gtaXRlbSBmYWRlIGluIHNob3ciPjwvZGl2PjxkaXYgY2xhc3M9ImVra28tbGlnaHRib3gtaXRlbSBmYWRlIj48L2Rpdj48L2Rpdj48L2Rpdj4nOw0KCQkJdmFyIGRpYWxvZyA9ICc8ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2ciIHJvbGU9ImRvY3VtZW50Ij48ZGl2IGNsYXNzPSJtb2RhbC1jb250ZW50Ij4nICsgaGVhZGVyICsgYm9keSArIGZvb3RlciArICc8L2Rpdj48L2Rpdj4nOw0KCQkJJCh0aGlzLl9jb25maWcuZG9jLmJvZHkpLmFwcGVuZCgnPGRpdiBpZD0iJyArIHRoaXMuX21vZGFsSWQgKyAnIiBjbGFzcz0iZWtrby1saWdodGJveCBtb2RhbCBmYWRlIiB0YWJpbmRleD0iLTEiIHRhYmluZGV4PSItMSIgcm9sZT0iZGlhbG9nIiBhcmlhLWhpZGRlbj0idHJ1ZSI+JyArIGRpYWxvZyArICc8L2Rpdj4nKTsNCg0KCQkJdGhpcy5fJG1vZGFsID0gJCgnIycgKyB0aGlzLl9tb2RhbElkLCB0aGlzLl9jb25maWcuZG9jKTsNCgkJCXRoaXMuXyRtb2RhbERpYWxvZyA9IHRoaXMuXyRtb2RhbC5maW5kKCcubW9kYWwtZGlhbG9nJykuZmlyc3QoKTsNCgkJCXRoaXMuXyRtb2RhbENvbnRlbnQgPSB0aGlzLl8kbW9kYWwuZmluZCgnLm1vZGFsLWNvbnRlbnQnKS5maXJzdCgpOw0KCQkJdGhpcy5fJG1vZGFsQm9keSA9IHRoaXMuXyRtb2RhbC5maW5kKCcubW9kYWwtYm9keScpLmZpcnN0KCk7DQoJCQl0aGlzLl8kbW9kYWxIZWFkZXIgPSB0aGlzLl8kbW9kYWwuZmluZCgnLm1vZGFsLWhlYWRlcicpLmZpcnN0KCk7DQoJCQl0aGlzLl8kbW9kYWxGb290ZXIgPSB0aGlzLl8kbW9kYWwuZmluZCgnLm1vZGFsLWZvb3RlcicpLmZpcnN0KCk7DQoNCgkJCXRoaXMuXyRsaWdodGJveENvbnRhaW5lciA9IHRoaXMuXyRtb2RhbEJvZHkuZmluZCgnLmVra28tbGlnaHRib3gtY29udGFpbmVyJykuZmlyc3QoKTsNCgkJCXRoaXMuXyRsaWdodGJveEJvZHlPbmUgPSB0aGlzLl8kbGlnaHRib3hDb250YWluZXIuZmluZCgnPiBkaXY6Zmlyc3QtY2hpbGQnKS5maXJzdCgpOw0KCQkJdGhpcy5fJGxpZ2h0Ym94Qm9keVR3byA9IHRoaXMuXyRsaWdodGJveENvbnRhaW5lci5maW5kKCc+IGRpdjpsYXN0LWNoaWxkJykuZmlyc3QoKTsNCg0KCQkJdGhpcy5fYm9yZGVyID0gdGhpcy5fY2FsY3VsYXRlQm9yZGVycygpOw0KCQkJdGhpcy5fcGFkZGluZyA9IHRoaXMuX2NhbGN1bGF0ZVBhZGRpbmcoKTsNCg0KCQkJdGhpcy5fZ2FsbGVyeU5hbWUgPSB0aGlzLl8kZWxlbWVudC5kYXRhKCdnYWxsZXJ5Jyk7DQoJCQlpZiAodGhpcy5fZ2FsbGVyeU5hbWUpIHsNCgkJCQl0aGlzLl8kZ2FsbGVyeUl0ZW1zID0gJChkb2N1bWVudC5ib2R5KS5maW5kKCcqW2RhdGEtZ2FsbGVyeT0iJyArIHRoaXMuX2dhbGxlcnlOYW1lICsgJyJdJyk7DQoJCQkJdGhpcy5fZ2FsbGVyeUluZGV4ID0gdGhpcy5fJGdhbGxlcnlJdGVtcy5pbmRleCh0aGlzLl8kZWxlbWVudCk7DQoJCQkJJChkb2N1bWVudCkub24oJ2tleWRvd24uZWtrb0xpZ2h0Ym94JywgdGhpcy5fbmF2aWdhdGlvbmFsQmluZGVyLmJpbmQodGhpcykpOw0KDQoJCQkJLy8gYWRkIHRoZSBkaXJlY3Rpb25hbCBhcnJvd3MgdG8gdGhlIG1vZGFsDQoJCQkJaWYgKHRoaXMuX2NvbmZpZy5zaG93QXJyb3dzICYmIHRoaXMuXyRnYWxsZXJ5SXRlbXMubGVuZ3RoID4gMSkgew0KCQkJCQl0aGlzLl8kbGlnaHRib3hDb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPSJla2tvLWxpZ2h0Ym94LW5hdi1vdmVybGF5Ij48YSBocmVmPSIjIj4nICsgdGhpcy5fY29uZmlnLmxlZnRBcnJvdyArICc8L2E+PGEgaHJlZj0iIyI+JyArIHRoaXMuX2NvbmZpZy5yaWdodEFycm93ICsgJzwvYT48L2Rpdj4nKTsNCgkJCQkJdGhpcy5fJG1vZGFsQXJyb3dzID0gdGhpcy5fJGxpZ2h0Ym94Q29udGFpbmVyLmZpbmQoJ2Rpdi5la2tvLWxpZ2h0Ym94LW5hdi1vdmVybGF5JykuZmlyc3QoKTsNCgkJCQkJdGhpcy5fJGxpZ2h0Ym94Q29udGFpbmVyLm9uKCdjbGljaycsICdhOmZpcnN0LWNoaWxkJywgZnVuY3Rpb24gKGV2ZW50KSB7DQoJCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KCQkJCQkJcmV0dXJuIF90aGlzLm5hdmlnYXRlTGVmdCgpOw0KCQkJCQl9KTsNCgkJCQkJdGhpcy5fJGxpZ2h0Ym94Q29udGFpbmVyLm9uKCdjbGljaycsICdhOmxhc3QtY2hpbGQnLCBmdW5jdGlvbiAoZXZlbnQpIHsNCgkJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQoJCQkJCQlyZXR1cm4gX3RoaXMubmF2aWdhdGVSaWdodCgpOw0KCQkJCQl9KTsNCgkJCQkJdGhpcy51cGRhdGVOYXZpZ2F0aW9uKCk7DQoJCQkJfQ0KCQkJfQ0KDQoJCQl0aGlzLl8kbW9kYWwub24oJ3Nob3cuYnMubW9kYWwnLCB0aGlzLl9jb25maWcub25TaG93LmJpbmQodGhpcykpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHsNCgkJCQlfdGhpcy5fdG9nZ2xlTG9hZGluZyh0cnVlKTsNCgkJCQlfdGhpcy5faGFuZGxlKCk7DQoJCQkJcmV0dXJuIF90aGlzLl9jb25maWcub25TaG93bi5jYWxsKF90aGlzKTsNCgkJCX0pLm9uKCdoaWRlLmJzLm1vZGFsJywgdGhpcy5fY29uZmlnLm9uSGlkZS5iaW5kKHRoaXMpKS5vbignaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkgew0KCQkJCWlmIChfdGhpcy5fZ2FsbGVyeU5hbWUpIHsNCgkJCQkJJChkb2N1bWVudCkub2ZmKCdrZXlkb3duLmVra29MaWdodGJveCcpOw0KCQkJCQkkKHdpbmRvdykub2ZmKCdyZXNpemUuZWtrb0xpZ2h0Ym94Jyk7DQoJCQkJfQ0KCQkJCV90aGlzLl8kbW9kYWwucmVtb3ZlKCk7DQoJCQkJcmV0dXJuIF90aGlzLl9jb25maWcub25IaWRkZW4uY2FsbChfdGhpcyk7DQoJCQl9KS5tb2RhbCh0aGlzLl9jb25maWcpOw0KDQoJCQkkKHdpbmRvdykub24oJ3Jlc2l6ZS5la2tvTGlnaHRib3gnLCBmdW5jdGlvbiAoKSB7DQoJCQkJX3RoaXMuX3Jlc2l6ZShfdGhpcy5fd2FudGVkV2lkdGgsIF90aGlzLl93YW50ZWRIZWlnaHQpOw0KCQkJfSk7DQoJCQl0aGlzLl8kbGlnaHRib3hDb250YWluZXIub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbiAoKSB7DQoJCQkJX3RoaXMuX3RvdWNoc3RhcnRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uc2NyZWVuWDsNCgkJCX0pLm9uKCd0b3VjaGVuZCcsIGZ1bmN0aW9uICgpIHsNCgkJCQlfdGhpcy5fdG91Y2hlbmRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uc2NyZWVuWDsNCgkJCQlfdGhpcy5fc3dpcGVHZXN1cmUoKTsNCgkJCX0pOw0KCQl9DQoNCgkJX2NyZWF0ZUNsYXNzKExpZ2h0Ym94LCBbew0KCQkJa2V5OiAnZWxlbWVudCcsDQoJCQl2YWx1ZTogZnVuY3Rpb24gZWxlbWVudCgpIHsNCgkJCQlyZXR1cm4gdGhpcy5fJGVsZW1lbnQ7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ21vZGFsJywNCgkJCXZhbHVlOiBmdW5jdGlvbiBtb2RhbCgpIHsNCgkJCQlyZXR1cm4gdGhpcy5fJG1vZGFsOw0KCQkJfQ0KCQl9LCB7DQoJCQlrZXk6ICduYXZpZ2F0ZVRvJywNCgkJCXZhbHVlOiBmdW5jdGlvbiBuYXZpZ2F0ZVRvKGluZGV4KSB7DQoNCgkJCQlpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gdGhpcy5fJGdhbGxlcnlJdGVtcy5sZW5ndGggLSAxKSByZXR1cm4gdGhpczsNCg0KCQkJCXRoaXMuX2dhbGxlcnlJbmRleCA9IGluZGV4Ow0KDQoJCQkJdGhpcy51cGRhdGVOYXZpZ2F0aW9uKCk7DQoNCgkJCQl0aGlzLl8kZWxlbWVudCA9ICQodGhpcy5fJGdhbGxlcnlJdGVtcy5nZXQodGhpcy5fZ2FsbGVyeUluZGV4KSk7DQoJCQkJdGhpcy5faGFuZGxlKCk7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ25hdmlnYXRlTGVmdCcsDQoJCQl2YWx1ZTogZnVuY3Rpb24gbmF2aWdhdGVMZWZ0KCkgew0KDQoJCQkJaWYgKCF0aGlzLl8kZ2FsbGVyeUl0ZW1zKSByZXR1cm47DQoNCgkJCQlpZiAodGhpcy5fJGdhbGxlcnlJdGVtcy5sZW5ndGggPT09IDEpIHJldHVybjsNCg0KCQkJCWlmICh0aGlzLl9nYWxsZXJ5SW5kZXggPT09IDApIHsNCgkJCQkJaWYgKHRoaXMuX2NvbmZpZy53cmFwcGluZykgdGhpcy5fZ2FsbGVyeUluZGV4ID0gdGhpcy5fJGdhbGxlcnlJdGVtcy5sZW5ndGggLSAxO2Vsc2UgcmV0dXJuOw0KCQkJCX0gZWxzZSAvL2NpcmN1bGFyDQoJCQkJCXRoaXMuX2dhbGxlcnlJbmRleC0tOw0KDQoJCQkJdGhpcy5fY29uZmlnLm9uTmF2aWdhdGUuY2FsbCh0aGlzLCAnbGVmdCcsIHRoaXMuX2dhbGxlcnlJbmRleCk7DQoJCQkJcmV0dXJuIHRoaXMubmF2aWdhdGVUbyh0aGlzLl9nYWxsZXJ5SW5kZXgpOw0KCQkJfQ0KCQl9LCB7DQoJCQlrZXk6ICduYXZpZ2F0ZVJpZ2h0JywNCgkJCXZhbHVlOiBmdW5jdGlvbiBuYXZpZ2F0ZVJpZ2h0KCkgew0KDQoJCQkJaWYgKCF0aGlzLl8kZ2FsbGVyeUl0ZW1zKSByZXR1cm47DQoNCgkJCQlpZiAodGhpcy5fJGdhbGxlcnlJdGVtcy5sZW5ndGggPT09IDEpIHJldHVybjsNCg0KCQkJCWlmICh0aGlzLl9nYWxsZXJ5SW5kZXggPT09IHRoaXMuXyRnYWxsZXJ5SXRlbXMubGVuZ3RoIC0gMSkgew0KCQkJCQlpZiAodGhpcy5fY29uZmlnLndyYXBwaW5nKSB0aGlzLl9nYWxsZXJ5SW5kZXggPSAwO2Vsc2UgcmV0dXJuOw0KCQkJCX0gZWxzZSAvL2NpcmN1bGFyDQoJCQkJCXRoaXMuX2dhbGxlcnlJbmRleCsrOw0KDQoJCQkJdGhpcy5fY29uZmlnLm9uTmF2aWdhdGUuY2FsbCh0aGlzLCAncmlnaHQnLCB0aGlzLl9nYWxsZXJ5SW5kZXgpOw0KCQkJCXJldHVybiB0aGlzLm5hdmlnYXRlVG8odGhpcy5fZ2FsbGVyeUluZGV4KTsNCgkJCX0NCgkJfSwgew0KCQkJa2V5OiAndXBkYXRlTmF2aWdhdGlvbicsDQoJCQl2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTmF2aWdhdGlvbigpIHsNCgkJCQlpZiAoIXRoaXMuX2NvbmZpZy53cmFwcGluZykgew0KCQkJCQl2YXIgJG5hdiA9IHRoaXMuXyRsaWdodGJveENvbnRhaW5lci5maW5kKCdkaXYuZWtrby1saWdodGJveC1uYXYtb3ZlcmxheScpOw0KCQkJCQlpZiAodGhpcy5fZ2FsbGVyeUluZGV4ID09PSAwKSAkbmF2LmZpbmQoJ2E6Zmlyc3QtY2hpbGQnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtlbHNlICRuYXYuZmluZCgnYTpmaXJzdC1jaGlsZCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpOw0KDQoJCQkJCWlmICh0aGlzLl9nYWxsZXJ5SW5kZXggPT09IHRoaXMuXyRnYWxsZXJ5SXRlbXMubGVuZ3RoIC0gMSkgJG5hdi5maW5kKCdhOmxhc3QtY2hpbGQnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtlbHNlICRuYXYuZmluZCgnYTpsYXN0LWNoaWxkJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7DQoJCQkJfQ0KCQkJfQ0KCQl9LCB7DQoJCQlrZXk6ICdjbG9zZScsDQoJCQl2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7DQoJCQkJcmV0dXJuIHRoaXMuXyRtb2RhbC5tb2RhbCgnaGlkZScpOw0KCQkJfQ0KDQoJCQkvLyBoZWxwZXIgcHJpdmF0ZSBtZXRob2RzDQoJCX0sIHsNCgkJCWtleTogJ19uYXZpZ2F0aW9uYWxCaW5kZXInLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF9uYXZpZ2F0aW9uYWxCaW5kZXIoZXZlbnQpIHsNCgkJCQlldmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsNCgkJCQlpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzkpIHJldHVybiB0aGlzLm5hdmlnYXRlUmlnaHQoKTsNCgkJCQlpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzcpIHJldHVybiB0aGlzLm5hdmlnYXRlTGVmdCgpOw0KCQkJfQ0KDQoJCQkvLyB0eXBlIGRldGVjdGlvbiBwcml2YXRlIG1ldGhvZHMNCgkJfSwgew0KCQkJa2V5OiAnX2RldGVjdFJlbW90ZVR5cGUnLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF9kZXRlY3RSZW1vdGVUeXBlKHNyYywgdHlwZSkgew0KDQoJCQkJdHlwZSA9IHR5cGUgfHwgZmFsc2U7DQoNCgkJCQlpZiAoIXR5cGUgJiYgdGhpcy5faXNJbWFnZShzcmMpKSB0eXBlID0gJ2ltYWdlJzsNCgkJCQlpZiAoIXR5cGUgJiYgdGhpcy5fZ2V0WW91dHViZUlkKHNyYykpIHR5cGUgPSAneW91dHViZSc7DQoJCQkJaWYgKCF0eXBlICYmIHRoaXMuX2dldFZpbWVvSWQoc3JjKSkgdHlwZSA9ICd2aW1lbyc7DQoJCQkJaWYgKCF0eXBlICYmIHRoaXMuX2dldEluc3RhZ3JhbUlkKHNyYykpIHR5cGUgPSAnaW5zdGFncmFtJzsNCg0KCQkJCWlmICghdHlwZSB8fCBbJ2ltYWdlJywgJ3lvdXR1YmUnLCAndmltZW8nLCAnaW5zdGFncmFtJywgJ3ZpZGVvJywgJ3VybCddLmluZGV4T2YodHlwZSkgPCAwKSB0eXBlID0gJ3VybCc7DQoNCgkJCQlyZXR1cm4gdHlwZTsNCgkJCX0NCgkJfSwgew0KCQkJa2V5OiAnX2lzSW1hZ2UnLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF9pc0ltYWdlKHN0cmluZykgew0KCQkJCXJldHVybiBzdHJpbmcgJiYgc3RyaW5nLm1hdGNoKC8oXmRhdGE6aW1hZ2VcLy4qLCl8KFwuKGpwKGV8Z3xlZyl8Z2lmfHBuZ3xibXB8d2VicHxzdmcpKChcP3wjKS4qKT8kKS9pKTsNCgkJCX0NCgkJfSwgew0KCQkJa2V5OiAnX2NvbnRhaW5lclRvVXNlJywNCgkJCXZhbHVlOiBmdW5jdGlvbiBfY29udGFpbmVyVG9Vc2UoKSB7DQoJCQkJdmFyIF90aGlzMiA9IHRoaXM7DQoNCgkJCQkvLyBpZiBjdXJyZW50bHkgc2hvd2luZyBhbiBpbWFnZSwgZmFkZSBpdCBvdXQgYW5kIHJlbW92ZQ0KCQkJCXZhciAkdG9Vc2UgPSB0aGlzLl8kbGlnaHRib3hCb2R5VHdvOw0KCQkJCXZhciAkY3VycmVudCA9IHRoaXMuXyRsaWdodGJveEJvZHlPbmU7DQoNCgkJCQlpZiAodGhpcy5fJGxpZ2h0Ym94Qm9keVR3by5oYXNDbGFzcygnaW4nKSkgew0KCQkJCQkkdG9Vc2UgPSB0aGlzLl8kbGlnaHRib3hCb2R5T25lOw0KCQkJCQkkY3VycmVudCA9IHRoaXMuXyRsaWdodGJveEJvZHlUd287DQoJCQkJfQ0KDQoJCQkJJGN1cnJlbnQucmVtb3ZlQ2xhc3MoJ2luIHNob3cnKTsNCgkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCgkJCQkJaWYgKCFfdGhpczIuXyRsaWdodGJveEJvZHlUd28uaGFzQ2xhc3MoJ2luJykpIF90aGlzMi5fJGxpZ2h0Ym94Qm9keVR3by5lbXB0eSgpOw0KCQkJCQlpZiAoIV90aGlzMi5fJGxpZ2h0Ym94Qm9keU9uZS5oYXNDbGFzcygnaW4nKSkgX3RoaXMyLl8kbGlnaHRib3hCb2R5T25lLmVtcHR5KCk7DQoJCQkJfSwgNTAwKTsNCg0KCQkJCSR0b1VzZS5hZGRDbGFzcygnaW4gc2hvdycpOw0KCQkJCXJldHVybiAkdG9Vc2U7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ19oYW5kbGUnLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGUoKSB7DQoNCgkJCQl2YXIgJHRvVXNlID0gdGhpcy5fY29udGFpbmVyVG9Vc2UoKTsNCgkJCQl0aGlzLl91cGRhdGVUaXRsZUFuZEZvb3RlcigpOw0KDQoJCQkJdmFyIGN1cnJlbnRSZW1vdGUgPSB0aGlzLl8kZWxlbWVudC5hdHRyKCdkYXRhLXJlbW90ZScpIHx8IHRoaXMuXyRlbGVtZW50LmF0dHIoJ2hyZWYnKTsNCgkJCQl2YXIgY3VycmVudFR5cGUgPSB0aGlzLl9kZXRlY3RSZW1vdGVUeXBlKGN1cnJlbnRSZW1vdGUsIHRoaXMuXyRlbGVtZW50LmF0dHIoJ2RhdGEtdHlwZScpIHx8IGZhbHNlKTsNCg0KCQkJCWlmIChbJ2ltYWdlJywgJ3lvdXR1YmUnLCAndmltZW8nLCAnaW5zdGFncmFtJywgJ3ZpZGVvJywgJ3VybCddLmluZGV4T2YoY3VycmVudFR5cGUpIDwgMCkgcmV0dXJuIHRoaXMuX2Vycm9yKHRoaXMuX2NvbmZpZy5zdHJpbmdzLnR5cGUpOw0KDQoJCQkJc3dpdGNoIChjdXJyZW50VHlwZSkgew0KCQkJCQljYXNlICdpbWFnZSc6DQoJCQkJCQl0aGlzLl9wcmVsb2FkSW1hZ2UoY3VycmVudFJlbW90ZSwgJHRvVXNlKTsNCgkJCQkJCXRoaXMuX3ByZWxvYWRJbWFnZUJ5SW5kZXgodGhpcy5fZ2FsbGVyeUluZGV4LCAzKTsNCgkJCQkJCWJyZWFrOw0KCQkJCQljYXNlICd5b3V0dWJlJzoNCgkJCQkJCXRoaXMuX3Nob3dZb3V0dWJlVmlkZW8oY3VycmVudFJlbW90ZSwgJHRvVXNlKTsNCgkJCQkJCWJyZWFrOw0KCQkJCQljYXNlICd2aW1lbyc6DQoJCQkJCQl0aGlzLl9zaG93VmltZW9WaWRlbyh0aGlzLl9nZXRWaW1lb0lkKGN1cnJlbnRSZW1vdGUpLCAkdG9Vc2UpOw0KCQkJCQkJYnJlYWs7DQoJCQkJCWNhc2UgJ2luc3RhZ3JhbSc6DQoJCQkJCQl0aGlzLl9zaG93SW5zdGFncmFtVmlkZW8odGhpcy5fZ2V0SW5zdGFncmFtSWQoY3VycmVudFJlbW90ZSksICR0b1VzZSk7DQoJCQkJCQlicmVhazsNCgkJCQkJY2FzZSAndmlkZW8nOg0KCQkJCQkJdGhpcy5fc2hvd0h0bWw1VmlkZW8oY3VycmVudFJlbW90ZSwgJHRvVXNlKTsNCgkJCQkJCWJyZWFrOw0KCQkJCQlkZWZhdWx0Og0KCQkJCQkJLy8gdXJsDQoJCQkJCQl0aGlzLl9sb2FkUmVtb3RlQ29udGVudChjdXJyZW50UmVtb3RlLCAkdG9Vc2UpOw0KCQkJCQkJYnJlYWs7DQoJCQkJfQ0KDQoJCQkJcmV0dXJuIHRoaXM7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ19nZXRZb3V0dWJlSWQnLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF9nZXRZb3V0dWJlSWQoc3RyaW5nKSB7DQoJCQkJaWYgKCFzdHJpbmcpIHJldHVybiBmYWxzZTsNCgkJCQl2YXIgbWF0Y2hlcyA9IHN0cmluZy5tYXRjaCgvXi4qKHlvdXR1LmJlXC98dlwvfHVcL1x3XC98ZW1iZWRcL3x3YXRjaFw/dj18XCZ2PSkoW14jXCZcP10qKS4qLyk7DQoJCQkJcmV0dXJuIG1hdGNoZXMgJiYgbWF0Y2hlc1syXS5sZW5ndGggPT09IDExID8gbWF0Y2hlc1syXSA6IGZhbHNlOw0KCQkJfQ0KCQl9LCB7DQoJCQlrZXk6ICdfZ2V0VmltZW9JZCcsDQoJCQl2YWx1ZTogZnVuY3Rpb24gX2dldFZpbWVvSWQoc3RyaW5nKSB7DQoJCQkJcmV0dXJuIHN0cmluZyAmJiBzdHJpbmcuaW5kZXhPZigndmltZW8nKSA+IDAgPyBzdHJpbmcgOiBmYWxzZTsNCgkJCX0NCgkJfSwgew0KCQkJa2V5OiAnX2dldEluc3RhZ3JhbUlkJywNCgkJCXZhbHVlOiBmdW5jdGlvbiBfZ2V0SW5zdGFncmFtSWQoc3RyaW5nKSB7DQoJCQkJcmV0dXJuIHN0cmluZyAmJiBzdHJpbmcuaW5kZXhPZignaW5zdGFncmFtJykgPiAwID8gc3RyaW5nIDogZmFsc2U7DQoJCQl9DQoNCgkJCS8vIGxheW91dCBwcml2YXRlIG1ldGhvZHMNCgkJfSwgew0KCQkJa2V5OiAnX3RvZ2dsZUxvYWRpbmcnLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF90b2dnbGVMb2FkaW5nKHNob3cpIHsNCgkJCQlzaG93ID0gc2hvdyB8fCBmYWxzZTsNCgkJCQlpZiAoc2hvdykgew0KCQkJCQl0aGlzLl8kbW9kYWxEaWFsb2cuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsNCgkJCQkJdGhpcy5fJG1vZGFsLnJlbW92ZUNsYXNzKCdpbiBzaG93Jyk7DQoJCQkJCSQoJy5tb2RhbC1iYWNrZHJvcCcpLmFwcGVuZCh0aGlzLl9jb25maWcubG9hZGluZ01lc3NhZ2UpOw0KCQkJCX0gZWxzZSB7DQoJCQkJCXRoaXMuXyRtb2RhbERpYWxvZy5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTsNCgkJCQkJdGhpcy5fJG1vZGFsLmFkZENsYXNzKCdpbiBzaG93Jyk7DQoJCQkJCSQoJy5tb2RhbC1iYWNrZHJvcCcpLmZpbmQoJy5la2tvLWxpZ2h0Ym94LWxvYWRlcicpLnJlbW92ZSgpOw0KCQkJCX0NCgkJCQlyZXR1cm4gdGhpczsNCgkJCX0NCgkJfSwgew0KCQkJa2V5OiAnX2NhbGN1bGF0ZUJvcmRlcnMnLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF9jYWxjdWxhdGVCb3JkZXJzKCkgew0KCQkJCXJldHVybiB7DQoJCQkJCXRvcDogdGhpcy5fdG90YWxDc3NCeUF0dHJpYnV0ZSgnYm9yZGVyLXRvcC13aWR0aCcpLA0KCQkJCQlyaWdodDogdGhpcy5fdG90YWxDc3NCeUF0dHJpYnV0ZSgnYm9yZGVyLXJpZ2h0LXdpZHRoJyksDQoJCQkJCWJvdHRvbTogdGhpcy5fdG90YWxDc3NCeUF0dHJpYnV0ZSgnYm9yZGVyLWJvdHRvbS13aWR0aCcpLA0KCQkJCQlsZWZ0OiB0aGlzLl90b3RhbENzc0J5QXR0cmlidXRlKCdib3JkZXItbGVmdC13aWR0aCcpDQoJCQkJfTsNCgkJCX0NCgkJfSwgew0KCQkJa2V5OiAnX2NhbGN1bGF0ZVBhZGRpbmcnLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF9jYWxjdWxhdGVQYWRkaW5nKCkgew0KCQkJCXJldHVybiB7DQoJCQkJCXRvcDogdGhpcy5fdG90YWxDc3NCeUF0dHJpYnV0ZSgncGFkZGluZy10b3AnKSwNCgkJCQkJcmlnaHQ6IHRoaXMuX3RvdGFsQ3NzQnlBdHRyaWJ1dGUoJ3BhZGRpbmctcmlnaHQnKSwNCgkJCQkJYm90dG9tOiB0aGlzLl90b3RhbENzc0J5QXR0cmlidXRlKCdwYWRkaW5nLWJvdHRvbScpLA0KCQkJCQlsZWZ0OiB0aGlzLl90b3RhbENzc0J5QXR0cmlidXRlKCdwYWRkaW5nLWxlZnQnKQ0KCQkJCX07DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ190b3RhbENzc0J5QXR0cmlidXRlJywNCgkJCXZhbHVlOiBmdW5jdGlvbiBfdG90YWxDc3NCeUF0dHJpYnV0ZShhdHRyaWJ1dGUpIHsNCgkJCQlyZXR1cm4gcGFyc2VJbnQodGhpcy5fJG1vZGFsRGlhbG9nLmNzcyhhdHRyaWJ1dGUpLCAxMCkgKyBwYXJzZUludCh0aGlzLl8kbW9kYWxDb250ZW50LmNzcyhhdHRyaWJ1dGUpLCAxMCkgKyBwYXJzZUludCh0aGlzLl8kbW9kYWxCb2R5LmNzcyhhdHRyaWJ1dGUpLCAxMCk7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ191cGRhdGVUaXRsZUFuZEZvb3RlcicsDQoJCQl2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZVRpdGxlQW5kRm9vdGVyKCkgew0KCQkJCXZhciB0aXRsZSA9IHRoaXMuXyRlbGVtZW50LmRhdGEoJ3RpdGxlJykgfHwgIiI7DQoJCQkJdmFyIGNhcHRpb24gPSB0aGlzLl8kZWxlbWVudC5kYXRhKCdmb290ZXInKSB8fCAiIjsNCg0KCQkJCXRoaXMuX3RpdGxlSXNTaG93biA9IGZhbHNlOw0KCQkJCWlmICh0aXRsZSB8fCB0aGlzLl9jb25maWcuYWx3YXlzU2hvd0Nsb3NlKSB7DQoJCQkJCXRoaXMuX3RpdGxlSXNTaG93biA9IHRydWU7DQoJCQkJCXRoaXMuXyRtb2RhbEhlYWRlci5jc3MoJ2Rpc3BsYXknLCAnJykuZmluZCgnLm1vZGFsLXRpdGxlJykuaHRtbCh0aXRsZSB8fCAiJm5ic3A7Iik7DQoJCQkJfSBlbHNlIHRoaXMuXyRtb2RhbEhlYWRlci5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOw0KDQoJCQkJdGhpcy5fZm9vdGVySXNTaG93biA9IGZhbHNlOw0KCQkJCWlmIChjYXB0aW9uKSB7DQoJCQkJCXRoaXMuX2Zvb3RlcklzU2hvd24gPSB0cnVlOw0KCQkJCQl0aGlzLl8kbW9kYWxGb290ZXIuY3NzKCdkaXNwbGF5JywgJycpLmh0bWwoY2FwdGlvbik7DQoJCQkJfSBlbHNlIHRoaXMuXyRtb2RhbEZvb3Rlci5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOw0KDQoJCQkJcmV0dXJuIHRoaXM7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ19zaG93WW91dHViZVZpZGVvJywNCgkJCXZhbHVlOiBmdW5jdGlvbiBfc2hvd1lvdXR1YmVWaWRlbyhyZW1vdGUsICRjb250YWluZXJGb3JFbGVtZW50KSB7DQoJCQkJdmFyIGlkID0gdGhpcy5fZ2V0WW91dHViZUlkKHJlbW90ZSk7DQoJCQkJdmFyIHF1ZXJ5ID0gcmVtb3RlLmluZGV4T2YoJyYnKSA+IDAgPyByZW1vdGUuc3Vic3RyKHJlbW90ZS5pbmRleE9mKCcmJykpIDogJyc7DQoJCQkJdmFyIHdpZHRoID0gdGhpcy5fJGVsZW1lbnQuZGF0YSgnd2lkdGgnKSB8fCA1NjA7DQoJCQkJdmFyIGhlaWdodCA9IHRoaXMuXyRlbGVtZW50LmRhdGEoJ2hlaWdodCcpIHx8IHdpZHRoIC8gKDU2MCAvIDMxNSk7DQoJCQkJcmV0dXJuIHRoaXMuX3Nob3dWaWRlb0lmcmFtZSgnLy93d3cueW91dHViZS5jb20vZW1iZWQvJyArIGlkICsgJz9iYWRnZT0wJmF1dG9wbGF5PTEmaHRtbDU9MScgKyBxdWVyeSwgd2lkdGgsIGhlaWdodCwgJGNvbnRhaW5lckZvckVsZW1lbnQpOw0KCQkJfQ0KCQl9LCB7DQoJCQlrZXk6ICdfc2hvd1ZpbWVvVmlkZW8nLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF9zaG93VmltZW9WaWRlbyhpZCwgJGNvbnRhaW5lckZvckVsZW1lbnQpIHsNCgkJCQl2YXIgd2lkdGggPSB0aGlzLl8kZWxlbWVudC5kYXRhKCd3aWR0aCcpIHx8IDUwMDsNCgkJCQl2YXIgaGVpZ2h0ID0gdGhpcy5fJGVsZW1lbnQuZGF0YSgnaGVpZ2h0JykgfHwgd2lkdGggLyAoNTYwIC8gMzE1KTsNCgkJCQlyZXR1cm4gdGhpcy5fc2hvd1ZpZGVvSWZyYW1lKGlkICsgJz9hdXRvcGxheT0xJywgd2lkdGgsIGhlaWdodCwgJGNvbnRhaW5lckZvckVsZW1lbnQpOw0KCQkJfQ0KCQl9LCB7DQoJCQlrZXk6ICdfc2hvd0luc3RhZ3JhbVZpZGVvJywNCgkJCXZhbHVlOiBmdW5jdGlvbiBfc2hvd0luc3RhZ3JhbVZpZGVvKGlkLCAkY29udGFpbmVyRm9yRWxlbWVudCkgew0KCQkJCS8vIGluc3RhZ3JhbSBsb2FkIHRoZWlyIGNvbnRlbnQgaW50byBpZnJhbWUncyBzbyB0aGlzIGNhbiBiZSBwdXQgc3RyYWlnaHQgaW50byB0aGUgZWxlbWVudA0KCQkJCXZhciB3aWR0aCA9IHRoaXMuXyRlbGVtZW50LmRhdGEoJ3dpZHRoJykgfHwgNjEyOw0KCQkJCXZhciBoZWlnaHQgPSB3aWR0aCArIDgwOw0KCQkJCWlkID0gaWQuc3Vic3RyKC0xKSAhPT0gJy8nID8gaWQgKyAnLycgOiBpZDsgLy8gZW5zdXJlIGlkIGhhcyB0cmFpbGluZyBzbGFzaA0KCQkJCSRjb250YWluZXJGb3JFbGVtZW50Lmh0bWwoJzxpZnJhbWUgd2lkdGg9IicgKyB3aWR0aCArICciIGhlaWdodD0iJyArIGhlaWdodCArICciIHNyYz0iJyArIGlkICsgJ2VtYmVkLyIgZnJhbWVib3JkZXI9IjAiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nKTsNCgkJCQl0aGlzLl9yZXNpemUod2lkdGgsIGhlaWdodCk7DQoJCQkJdGhpcy5fY29uZmlnLm9uQ29udGVudExvYWRlZC5jYWxsKHRoaXMpOw0KCQkJCWlmICh0aGlzLl8kbW9kYWxBcnJvd3MpIC8vaGlkZSB0aGUgYXJyb3dzIHdoZW4gc2hvd2luZyB2aWRlbw0KCQkJCQl0aGlzLl8kbW9kYWxBcnJvd3MuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsNCgkJCQl0aGlzLl90b2dnbGVMb2FkaW5nKGZhbHNlKTsNCgkJCQlyZXR1cm4gdGhpczsNCgkJCX0NCgkJfSwgew0KCQkJa2V5OiAnX3Nob3dWaWRlb0lmcmFtZScsDQoJCQl2YWx1ZTogZnVuY3Rpb24gX3Nob3dWaWRlb0lmcmFtZSh1cmwsIHdpZHRoLCBoZWlnaHQsICRjb250YWluZXJGb3JFbGVtZW50KSB7DQoJCQkJLy8gc2hvdWxkIGJlIHVzZWQgZm9yIHZpZGVvcyBvbmx5LiBmb3IgcmVtb3RlIGNvbnRlbnQgdXNlIGxvYWRSZW1vdGVDb250ZW50IChkYXRhLXR5cGU9dXJsKQ0KCQkJCWhlaWdodCA9IGhlaWdodCB8fCB3aWR0aDsgLy8gZGVmYXVsdCB0byBzcXVhcmUNCgkJCQkkY29udGFpbmVyRm9yRWxlbWVudC5odG1sKCc8ZGl2IGNsYXNzPSJlbWJlZC1yZXNwb25zaXZlIGVtYmVkLXJlc3BvbnNpdmUtMTZieTkiPjxpZnJhbWUgd2lkdGg9IicgKyB3aWR0aCArICciIGhlaWdodD0iJyArIGhlaWdodCArICciIHNyYz0iJyArIHVybCArICciIGZyYW1lYm9yZGVyPSIwIiBhbGxvd2Z1bGxzY3JlZW4gY2xhc3M9ImVtYmVkLXJlc3BvbnNpdmUtaXRlbSI+PC9pZnJhbWU+PC9kaXY+Jyk7DQoJCQkJdGhpcy5fcmVzaXplKHdpZHRoLCBoZWlnaHQpOw0KCQkJCXRoaXMuX2NvbmZpZy5vbkNvbnRlbnRMb2FkZWQuY2FsbCh0aGlzKTsNCgkJCQlpZiAodGhpcy5fJG1vZGFsQXJyb3dzKSB0aGlzLl8kbW9kYWxBcnJvd3MuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsgLy9oaWRlIHRoZSBhcnJvd3Mgd2hlbiBzaG93aW5nIHZpZGVvDQoJCQkJdGhpcy5fdG9nZ2xlTG9hZGluZyhmYWxzZSk7DQoJCQkJcmV0dXJuIHRoaXM7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ19zaG93SHRtbDVWaWRlbycsDQoJCQl2YWx1ZTogZnVuY3Rpb24gX3Nob3dIdG1sNVZpZGVvKHVybCwgJGNvbnRhaW5lckZvckVsZW1lbnQpIHsNCgkJCQkvLyBzaG91bGQgYmUgdXNlZCBmb3IgdmlkZW9zIG9ubHkuIGZvciByZW1vdGUgY29udGVudCB1c2UgbG9hZFJlbW90ZUNvbnRlbnQgKGRhdGEtdHlwZT11cmwpDQoJCQkJdmFyIHdpZHRoID0gdGhpcy5fJGVsZW1lbnQuZGF0YSgnd2lkdGgnKSB8fCA1NjA7DQoJCQkJdmFyIGhlaWdodCA9IHRoaXMuXyRlbGVtZW50LmRhdGEoJ2hlaWdodCcpIHx8IHdpZHRoIC8gKDU2MCAvIDMxNSk7DQoJCQkJJGNvbnRhaW5lckZvckVsZW1lbnQuaHRtbCgnPGRpdiBjbGFzcz0iZW1iZWQtcmVzcG9uc2l2ZSBlbWJlZC1yZXNwb25zaXZlLTE2Ynk5Ij48dmlkZW8gd2lkdGg9IicgKyB3aWR0aCArICciIGhlaWdodD0iJyArIGhlaWdodCArICciIHNyYz0iJyArIHVybCArICciIHByZWxvYWQ9ImF1dG8iIGF1dG9wbGF5IGNvbnRyb2xzIGNsYXNzPSJlbWJlZC1yZXNwb25zaXZlLWl0ZW0iPjwvdmlkZW8+PC9kaXY+Jyk7DQoJCQkJdGhpcy5fcmVzaXplKHdpZHRoLCBoZWlnaHQpOw0KCQkJCXRoaXMuX2NvbmZpZy5vbkNvbnRlbnRMb2FkZWQuY2FsbCh0aGlzKTsNCgkJCQlpZiAodGhpcy5fJG1vZGFsQXJyb3dzKSB0aGlzLl8kbW9kYWxBcnJvd3MuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsgLy9oaWRlIHRoZSBhcnJvd3Mgd2hlbiBzaG93aW5nIHZpZGVvDQoJCQkJdGhpcy5fdG9nZ2xlTG9hZGluZyhmYWxzZSk7DQoJCQkJcmV0dXJuIHRoaXM7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ19sb2FkUmVtb3RlQ29udGVudCcsDQoJCQl2YWx1ZTogZnVuY3Rpb24gX2xvYWRSZW1vdGVDb250ZW50KHVybCwgJGNvbnRhaW5lckZvckVsZW1lbnQpIHsNCgkJCQl2YXIgX3RoaXMzID0gdGhpczsNCg0KCQkJCXZhciB3aWR0aCA9IHRoaXMuXyRlbGVtZW50LmRhdGEoJ3dpZHRoJykgfHwgNTYwOw0KCQkJCXZhciBoZWlnaHQgPSB0aGlzLl8kZWxlbWVudC5kYXRhKCdoZWlnaHQnKSB8fCA1NjA7DQoNCgkJCQl2YXIgZGlzYWJsZUV4dGVybmFsQ2hlY2sgPSB0aGlzLl8kZWxlbWVudC5kYXRhKCdkaXNhYmxlRXh0ZXJuYWxDaGVjaycpIHx8IGZhbHNlOw0KCQkJCXRoaXMuX3RvZ2dsZUxvYWRpbmcoZmFsc2UpOw0KDQoJCQkJLy8gZXh0ZXJuYWwgdXJscyBhcmUgbG9hZGluZyBpbnRvIGFuIGlmcmFtZQ0KCQkJCS8vIGxvY2FsIGFqYXggY2FuIGJlIGxvYWRlZCBpbnRvIHRoZSBjb250YWluZXIgaXRzZWxmDQoJCQkJaWYgKCFkaXNhYmxlRXh0ZXJuYWxDaGVjayAmJiAhdGhpcy5faXNFeHRlcm5hbCh1cmwpKSB7DQoJCQkJCSRjb250YWluZXJGb3JFbGVtZW50LmxvYWQodXJsLCAkLnByb3h5KGZ1bmN0aW9uICgpIHsNCgkJCQkJCXJldHVybiBfdGhpczMuXyRlbGVtZW50LnRyaWdnZXIoJ2xvYWRlZC5icy5tb2RhbCcpO2w7DQoJCQkJCX0pKTsNCgkJCQl9IGVsc2Ugew0KCQkJCQkkY29udGFpbmVyRm9yRWxlbWVudC5odG1sKCc8aWZyYW1lIHNyYz0iJyArIHVybCArICciIGZyYW1lYm9yZGVyPSIwIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+Jyk7DQoJCQkJCXRoaXMuX2NvbmZpZy5vbkNvbnRlbnRMb2FkZWQuY2FsbCh0aGlzKTsNCgkJCQl9DQoNCgkJCQlpZiAodGhpcy5fJG1vZGFsQXJyb3dzKSAvL2hpZGUgdGhlIGFycm93cyB3aGVuIHJlbW90ZSBjb250ZW50DQoJCQkJCXRoaXMuXyRtb2RhbEFycm93cy5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOw0KDQoJCQkJdGhpcy5fcmVzaXplKHdpZHRoLCBoZWlnaHQpOw0KCQkJCXJldHVybiB0aGlzOw0KCQkJfQ0KCQl9LCB7DQoJCQlrZXk6ICdfaXNFeHRlcm5hbCcsDQoJCQl2YWx1ZTogZnVuY3Rpb24gX2lzRXh0ZXJuYWwodXJsKSB7DQoJCQkJdmFyIG1hdGNoID0gdXJsLm1hdGNoKC9eKFteOlwvPyNdKzopPyg/OlwvXC8oW15cLz8jXSopKT8oW14/I10rKT8oXD9bXiNdKik/KCMuKik/Lyk7DQoJCQkJaWYgKHR5cGVvZiBtYXRjaFsxXSA9PT0gInN0cmluZyIgJiYgbWF0Y2hbMV0ubGVuZ3RoID4gMCAmJiBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpICE9PSBsb2NhdGlvbi5wcm90b2NvbCkgcmV0dXJuIHRydWU7DQoNCgkJCQlpZiAodHlwZW9mIG1hdGNoWzJdID09PSAic3RyaW5nIiAmJiBtYXRjaFsyXS5sZW5ndGggPiAwICYmIG1hdGNoWzJdLnJlcGxhY2UobmV3IFJlZ0V4cCgnOignICsgKHsNCgkJCQkJImh0dHA6IjogODAsDQoJCQkJCSJodHRwczoiOiA0NDMNCgkJCQl9KVtsb2NhdGlvbi5wcm90b2NvbF0gKyAnKT8kJyksICIiKSAhPT0gbG9jYXRpb24uaG9zdCkgcmV0dXJuIHRydWU7DQoNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ19lcnJvcicsDQoJCQl2YWx1ZTogZnVuY3Rpb24gX2Vycm9yKG1lc3NhZ2UpIHsNCgkJCQljb25zb2xlLmVycm9yKG1lc3NhZ2UpOw0KCQkJCXRoaXMuX2NvbnRhaW5lclRvVXNlKCkuaHRtbChtZXNzYWdlKTsNCgkJCQl0aGlzLl9yZXNpemUoMzAwLCAzMDApOw0KCQkJCXJldHVybiB0aGlzOw0KCQkJfQ0KCQl9LCB7DQoJCQlrZXk6ICdfcHJlbG9hZEltYWdlQnlJbmRleCcsDQoJCQl2YWx1ZTogZnVuY3Rpb24gX3ByZWxvYWRJbWFnZUJ5SW5kZXgoc3RhcnRJbmRleCwgbnVtYmVyT2ZUaW1lcykgew0KDQoJCQkJaWYgKCF0aGlzLl8kZ2FsbGVyeUl0ZW1zKSByZXR1cm47DQoNCgkJCQl2YXIgbmV4dCA9ICQodGhpcy5fJGdhbGxlcnlJdGVtcy5nZXQoc3RhcnRJbmRleCksIGZhbHNlKTsNCgkJCQlpZiAodHlwZW9mIG5leHQgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjsNCg0KCQkJCXZhciBzcmMgPSBuZXh0LmF0dHIoJ2RhdGEtcmVtb3RlJykgfHwgbmV4dC5hdHRyKCdocmVmJyk7DQoJCQkJaWYgKG5leHQuYXR0cignZGF0YS10eXBlJykgPT09ICdpbWFnZScgfHwgdGhpcy5faXNJbWFnZShzcmMpKSB0aGlzLl9wcmVsb2FkSW1hZ2Uoc3JjLCBmYWxzZSk7DQoNCgkJCQlpZiAobnVtYmVyT2ZUaW1lcyA+IDApIHJldHVybiB0aGlzLl9wcmVsb2FkSW1hZ2VCeUluZGV4KHN0YXJ0SW5kZXggKyAxLCBudW1iZXJPZlRpbWVzIC0gMSk7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ19wcmVsb2FkSW1hZ2UnLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF9wcmVsb2FkSW1hZ2Uoc3JjLCAkY29udGFpbmVyRm9ySW1hZ2UpIHsNCgkJCQl2YXIgX3RoaXM0ID0gdGhpczsNCg0KCQkJCSRjb250YWluZXJGb3JJbWFnZSA9ICRjb250YWluZXJGb3JJbWFnZSB8fCBmYWxzZTsNCg0KCQkJCXZhciBpbWcgPSBuZXcgSW1hZ2UoKTsNCgkJCQlpZiAoJGNvbnRhaW5lckZvckltYWdlKSB7DQoJCQkJCShmdW5jdGlvbiAoKSB7DQoNCgkJCQkJCS8vIGlmIGxvYWRpbmcgdGFrZXMgPiAyMDBtcyBzaG93IGEgbG9hZGVyDQoJCQkJCQl2YXIgbG9hZGluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCgkJCQkJCQkkY29udGFpbmVyRm9ySW1hZ2UuYXBwZW5kKF90aGlzNC5fY29uZmlnLmxvYWRpbmdNZXNzYWdlKTsNCgkJCQkJCX0sIDIwMCk7DQoNCgkJCQkJCWltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7DQoJCQkJCQkJaWYgKGxvYWRpbmdUaW1lb3V0KSBjbGVhclRpbWVvdXQobG9hZGluZ1RpbWVvdXQpOw0KCQkJCQkJCWxvYWRpbmdUaW1lb3V0ID0gbnVsbDsNCgkJCQkJCQl2YXIgaW1hZ2UgPSAkKCc8aW1nIC8+Jyk7DQoJCQkJCQkJaW1hZ2UuYXR0cignc3JjJywgaW1nLnNyYyk7DQoJCQkJCQkJaW1hZ2UuYWRkQ2xhc3MoJ2ltZy1mbHVpZCcpOw0KDQoJCQkJCQkJLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSBmb3IgYm9vdHN0cmFwIHYzDQoJCQkJCQkJaW1hZ2UuY3NzKCd3aWR0aCcsICcxMDAlJyk7DQoNCgkJCQkJCQkkY29udGFpbmVyRm9ySW1hZ2UuaHRtbChpbWFnZSk7DQoJCQkJCQkJaWYgKF90aGlzNC5fJG1vZGFsQXJyb3dzKSBfdGhpczQuXyRtb2RhbEFycm93cy5jc3MoJ2Rpc3BsYXknLCAnJyk7IC8vIHJlbW92ZSBkaXNwbGF5IHRvIGRlZmF1bHQgdG8gY3NzIHByb3BlcnR5DQoNCgkJCQkJCQlfdGhpczQuX3Jlc2l6ZShpbWcud2lkdGgsIGltZy5oZWlnaHQpOw0KCQkJCQkJCV90aGlzNC5fdG9nZ2xlTG9hZGluZyhmYWxzZSk7DQoJCQkJCQkJcmV0dXJuIF90aGlzNC5fY29uZmlnLm9uQ29udGVudExvYWRlZC5jYWxsKF90aGlzNCk7DQoJCQkJCQl9Ow0KCQkJCQkJaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7DQoJCQkJCQkJX3RoaXM0Ll90b2dnbGVMb2FkaW5nKGZhbHNlKTsNCgkJCQkJCQlyZXR1cm4gX3RoaXM0Ll9lcnJvcihfdGhpczQuX2NvbmZpZy5zdHJpbmdzLmZhaWwgKyAoJyAgJyArIHNyYykpOw0KCQkJCQkJfTsNCgkJCQkJfSkoKTsNCgkJCQl9DQoNCgkJCQlpbWcuc3JjID0gc3JjOw0KCQkJCXJldHVybiBpbWc7DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ19zd2lwZUdlc3VyZScsDQoJCQl2YWx1ZTogZnVuY3Rpb24gX3N3aXBlR2VzdXJlKCkgew0KCQkJCWlmICh0aGlzLl90b3VjaGVuZFggPCB0aGlzLl90b3VjaHN0YXJ0WCkgew0KCQkJCQlyZXR1cm4gdGhpcy5uYXZpZ2F0ZVJpZ2h0KCk7DQoJCQkJfQ0KCQkJCWlmICh0aGlzLl90b3VjaGVuZFggPiB0aGlzLl90b3VjaHN0YXJ0WCkgew0KCQkJCQlyZXR1cm4gdGhpcy5uYXZpZ2F0ZUxlZnQoKTsNCgkJCQl9DQoJCQl9DQoJCX0sIHsNCgkJCWtleTogJ19yZXNpemUnLA0KCQkJdmFsdWU6IGZ1bmN0aW9uIF9yZXNpemUod2lkdGgsIGhlaWdodCkgew0KDQoJCQkJaGVpZ2h0ID0gaGVpZ2h0IHx8IHdpZHRoOw0KCQkJCXRoaXMuX3dhbnRlZFdpZHRoID0gd2lkdGg7DQoJCQkJdGhpcy5fd2FudGVkSGVpZ2h0ID0gaGVpZ2h0Ow0KDQoJCQkJdmFyIGltYWdlQXNwZWNSYXRpbyA9IHdpZHRoIC8gaGVpZ2h0Ow0KDQoJCQkJLy8gaWYgd2lkdGggPiB0aGUgYXZhaWxhYmxlIHNwYWNlLCBzY2FsZSBkb3duIHRoZSBleHBlY3RlZCB3aWR0aCBhbmQgaGVpZ2h0DQoJCQkJdmFyIHdpZHRoQm9yZGVyQW5kUGFkZGluZyA9IHRoaXMuX3BhZGRpbmcubGVmdCArIHRoaXMuX3BhZGRpbmcucmlnaHQgKyB0aGlzLl9ib3JkZXIubGVmdCArIHRoaXMuX2JvcmRlci5yaWdodDsNCg0KCQkJCS8vIGZvcmNlIDEwcHggbWFyZ2luIGlmIHdpbmRvdyBzaXplID4gNTc1cHgNCgkJCQl2YXIgYWRkTWFyZ2luID0gdGhpcy5fY29uZmlnLmRvYy5ib2R5LmNsaWVudFdpZHRoID4gNTc1ID8gMjAgOiAwOw0KCQkJCXZhciBkaXNjb3VudE1hcmdpbiA9IHRoaXMuX2NvbmZpZy5kb2MuYm9keS5jbGllbnRXaWR0aCA+IDU3NSA/IDAgOiAyMDsNCg0KCQkJCXZhciBtYXhXaWR0aCA9IE1hdGgubWluKHdpZHRoICsgd2lkdGhCb3JkZXJBbmRQYWRkaW5nLCB0aGlzLl9jb25maWcuZG9jLmJvZHkuY2xpZW50V2lkdGggLSBhZGRNYXJnaW4sIHRoaXMuX2NvbmZpZy5tYXhXaWR0aCk7DQoNCgkJCQlpZiAod2lkdGggKyB3aWR0aEJvcmRlckFuZFBhZGRpbmcgPiBtYXhXaWR0aCkgew0KCQkJCQloZWlnaHQgPSAobWF4V2lkdGggLSB3aWR0aEJvcmRlckFuZFBhZGRpbmcgLSBkaXNjb3VudE1hcmdpbikgLyBpbWFnZUFzcGVjUmF0aW87DQoJCQkJCXdpZHRoID0gbWF4V2lkdGg7DQoJCQkJfSBlbHNlIHdpZHRoID0gd2lkdGggKyB3aWR0aEJvcmRlckFuZFBhZGRpbmc7DQoNCgkJCQl2YXIgaGVhZGVySGVpZ2h0ID0gMCwNCgkJCQkgICAgZm9vdGVySGVpZ2h0ID0gMDsNCg0KCQkJCS8vIGFzIHRoZSByZXNpemUgaXMgcGVyZm9ybWVkIHRoZSBtb2RhbCBpcyBzaG93LCB0aGUgY2FsY3VsYXRlIG1pZ2h0IGZhaWwNCgkJCQkvLyBpZiBzbywgZGVmYXVsdCB0byB0aGUgZGVmYXVsdCBzaXplcw0KCQkJCWlmICh0aGlzLl9mb290ZXJJc1Nob3duKSBmb290ZXJIZWlnaHQgPSB0aGlzLl8kbW9kYWxGb290ZXIub3V0ZXJIZWlnaHQodHJ1ZSkgfHwgNTU7DQoNCgkJCQlpZiAodGhpcy5fdGl0bGVJc1Nob3duKSBoZWFkZXJIZWlnaHQgPSB0aGlzLl8kbW9kYWxIZWFkZXIub3V0ZXJIZWlnaHQodHJ1ZSkgfHwgNjc7DQoNCgkJCQl2YXIgYm9yZGVyUGFkZGluZyA9IHRoaXMuX3BhZGRpbmcudG9wICsgdGhpcy5fcGFkZGluZy5ib3R0b20gKyB0aGlzLl9ib3JkZXIuYm90dG9tICsgdGhpcy5fYm9yZGVyLnRvcDsNCg0KCQkJCS8vY2FsY3VsYXRlZCBlYWNoIHRpbWUgYXMgcmVzaXppbmcgdGhlIHdpbmRvdyBjYW4gY2F1c2UgdGhlbSB0byBjaGFuZ2UgZHVlIHRvIEJvb3RzdHJhcHMgZmx1aWQgbWFyZ2lucw0KCQkJCXZhciBtYXJnaW5zID0gcGFyc2VGbG9hdCh0aGlzLl8kbW9kYWxEaWFsb2cuY3NzKCdtYXJnaW4tdG9wJykpICsgcGFyc2VGbG9hdCh0aGlzLl8kbW9kYWxEaWFsb2cuY3NzKCdtYXJnaW4tYm90dG9tJykpOw0KDQoJCQkJdmFyIG1heEhlaWdodCA9IE1hdGgubWluKGhlaWdodCwgJCh3aW5kb3cpLmhlaWdodCgpIC0gYm9yZGVyUGFkZGluZyAtIG1hcmdpbnMgLSBoZWFkZXJIZWlnaHQgLSBmb290ZXJIZWlnaHQsIHRoaXMuX2NvbmZpZy5tYXhIZWlnaHQgLSBib3JkZXJQYWRkaW5nIC0gaGVhZGVySGVpZ2h0IC0gZm9vdGVySGVpZ2h0KTsNCg0KCQkJCWlmIChoZWlnaHQgPiBtYXhIZWlnaHQpIHsNCgkJCQkJLy8gaWYgaGVpZ2h0ID4gdGhlIGF2YWlsYWJsZSBoZWlnaHQsIHNjYWxlIGRvd24gdGhlIHdpZHRoDQoJCQkJCXdpZHRoID0gTWF0aC5jZWlsKG1heEhlaWdodCAqIGltYWdlQXNwZWNSYXRpbykgKyB3aWR0aEJvcmRlckFuZFBhZGRpbmc7DQoJCQkJfQ0KDQoJCQkJdGhpcy5fJGxpZ2h0Ym94Q29udGFpbmVyLmNzcygnaGVpZ2h0JywgbWF4SGVpZ2h0KTsNCgkJCQl0aGlzLl8kbW9kYWxEaWFsb2cuY3NzKCdmbGV4JywgMSkuY3NzKCdtYXhXaWR0aCcsIHdpZHRoKTsNCg0KCQkJCXZhciBtb2RhbCA9IHRoaXMuXyRtb2RhbC5kYXRhKCdicy5tb2RhbCcpOw0KCQkJCWlmIChtb2RhbCkgew0KCQkJCQkvLyB2NCBtZXRob2QgaXMgbWlzdGFrZW5seSBwcm90ZWN0ZWQNCgkJCQkJdHJ5IHsNCgkJCQkJCW1vZGFsLl9oYW5kbGVVcGRhdGUoKTsNCgkJCQkJfSBjYXRjaCAoRXhjZXB0aW9uKSB7DQoJCQkJCQltb2RhbC5oYW5kbGVVcGRhdGUoKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCQlyZXR1cm4gdGhpczsNCgkJCX0NCgkJfV0sIFt7DQoJCQlrZXk6ICdfalF1ZXJ5SW50ZXJmYWNlJywNCgkJCXZhbHVlOiBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykgew0KCQkJCXZhciBfdGhpczUgPSB0aGlzOw0KDQoJCQkJY29uZmlnID0gY29uZmlnIHx8IHt9Ow0KCQkJCXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgew0KCQkJCQl2YXIgJHRoaXMgPSAkKF90aGlzNSk7DQoJCQkJCXZhciBfY29uZmlnID0gJC5leHRlbmQoe30sIExpZ2h0Ym94LkRlZmF1bHQsICR0aGlzLmRhdGEoKSwgdHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcgJiYgY29uZmlnKTsNCg0KCQkJCQluZXcgTGlnaHRib3goX3RoaXM1LCBfY29uZmlnKTsNCgkJCQl9KTsNCgkJCX0NCgkJfV0pOw0KDQoJCXJldHVybiBMaWdodGJveDsNCgl9KSgpOw0KDQoJJC5mbltOQU1FXSA9IExpZ2h0Ym94Ll9qUXVlcnlJbnRlcmZhY2U7DQoJJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IExpZ2h0Ym94Ow0KCSQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsNCgkJJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDsNCgkJcmV0dXJuIExpZ2h0Ym94Ll9qUXVlcnlJbnRlcmZhY2U7DQoJfTsNCg0KCXJldHVybiBMaWdodGJveDsNCn0pKGpRdWVyeSk7DQovLyMgc291cmNlTWFwcGluZ1VSTD1la2tvLWxpZ2h0Ym94LmpzLm1hcA0KDQp9KGpRdWVyeSk7DQo=
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 25613
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20220715T094233Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
